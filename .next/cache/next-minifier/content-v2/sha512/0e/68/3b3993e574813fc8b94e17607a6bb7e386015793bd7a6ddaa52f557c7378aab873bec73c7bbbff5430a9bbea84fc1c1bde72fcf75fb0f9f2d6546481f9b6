{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{j49Z:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/categories\",function(){return a(\"mAMT\")}])},mAMT:function(e,t,a){\"use strict\";a.r(t);var r=a(\"nKUr\"),n=a(\"o0o1\"),c=a.n(n),s=a(\"KQm4\"),o=a(\"HaE+\"),i=a(\"g4pe\"),u=a.n(i),d=a(\"q1tI\"),l=a(\"qG/y\"),p=a(\"WtUO\"),b=a(\"EFaQ\");t.default=function(){var e=Object(d.useState)(\"\"),t=e[0],a=e[1],n=Object(d.useContext)(l.a),i=n.state,j=n.dispatch,m=i.categories,f=i.auth,O=Object(d.useState)(\"\"),y=O[0],x=O[1],N=function(){var e=Object(o.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"admin\"===f.user.role){e.next=2;break}return e.abrupt(\"return\",j({type:\"NOTIFY\",payload:{error:\"Authentication is not vaild.\"}}));case 2:if(t){e.next=4;break}return e.abrupt(\"return\",j({type:\"NOTIFY\",payload:{error:\"Name can not be left blank.\"}}));case 4:if(j({type:\"NOTIFY\",payload:{loading:!0}}),!y){e.next=14;break}return e.next=8,Object(b.e)(\"categories/\".concat(y),{name:t},f.token);case 8:if(!(r=e.sent).err){e.next=11;break}return e.abrupt(\"return\",j({type:\"NOTIFY\",payload:{error:r.err}}));case 11:j(Object(p.f)(m,y,r.category,\"ADD_CATEGORIES\")),e.next=20;break;case 14:return e.next=16,Object(b.d)(\"categories\",{name:t},f.token);case 16:if(!(r=e.sent).err){e.next=19;break}return e.abrupt(\"return\",j({type:\"NOTIFY\",payload:{error:r.err}}));case 19:j({type:\"ADD_CATEGORIES\",payload:[].concat(Object(s.a)(m),[r.newCategory])});case 20:return a(\"\"),x(\"\"),e.abrupt(\"return\",j({type:\"NOTIFY\",payload:{success:r.msg}}));case 23:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(\"div\",{className:\"col-md-6 mx-auto my-3\",children:[Object(r.jsx)(u.a,{children:Object(r.jsx)(\"title\",{children:\"Categories\"})}),Object(r.jsxs)(\"div\",{className:\"input-group mb-3\",children:[Object(r.jsx)(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Add a new category\",value:t,onChange:function(e){return a(e.target.value)}}),Object(r.jsx)(\"button\",{className:\"btn btn-secondary ml-1\",onClick:N,children:y?\"Update\":\"Create\"})]}),m.map((function(e){return Object(r.jsx)(\"div\",{className:\"card my-2 text-capitalize\",children:Object(r.jsxs)(\"div\",{className:\"card-body d-flex justify-content-between\",children:[e.name,Object(r.jsxs)(\"div\",{style:{cursor:\"pointer\"},children:[Object(r.jsx)(\"i\",{className:\"fas fa-edit mr-2 text-info\",onClick:function(){return function(e){x(e._id),a(e.name)}(e)}}),Object(r.jsx)(\"i\",{className:\"fas fa-trash-alt text-danger\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",onClick:function(){return j({type:\"ADD_MODAL\",payload:[{data:m,id:e._id,title:e.name,type:\"ADD_CATEGORIES\"}]})}})]})]})},e._id)}))]})}}},[[\"j49Z\",0,2,1,4]]]);","map":{"version":3,"sources":["static/chunks/pages/categories-7863697a0c2accff8143.js"],"names":["_N_E","window","push","j49Z","module","exports","__webpack_require__","__NEXT_P","mAMT","__webpack_exports__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","n","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","next_head__WEBPACK_IMPORTED_MODULE_4__","next_head__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","_store_GlobalState__WEBPACK_IMPORTED_MODULE_6__","_store_Actions__WEBPACK_IMPORTED_MODULE_7__","_utils_fetchData__WEBPACK_IMPORTED_MODULE_8__","_useState","Object","name","setName","_useContext","state","dispatch","categories","auth","_useState2","id","setId","createCategory","_ref","a","mark","_callee","res","wrap","_context","prev","next","user","role","abrupt","type","payload","error","loading","concat","token","sent","err","category","newCategory","success","msg","stop","apply","this","arguments","className","children","placeholder","value","onChange","e","target","onClick","map","catogory","style","cursor","_id","handleEditCategory","data-toggle","data-target","data","title"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpEC,KACA,SAAUC,EAAQC,EAASC,IAG5BL,OAAOM,SAAWN,OAAOM,UAAY,IAAIL,KAAK,CAC7C,cACA,WACE,OAAOI,EAAoB,YAO7BE,KACA,SAAUJ,EAAQK,EAAqBH,GAE7C,aACAA,EAAoBI,EAAED,GACD,IAAIE,EAAiDL,EAAoB,QAErEM,EAA+FN,EAAoB,QACnHO,EAAoHP,EAAoBQ,EAAEF,GAC1IG,EAAiHT,EAAoB,QACrIU,EAAgHV,EAAoB,QACpIW,EAAyCX,EAAoB,QAC7DY,EAA8DZ,EAAoBQ,EAAEG,GACpFE,EAAqCb,EAAoB,QAEzDc,EAAkDd,EAAoB,QACtEe,EAA8Cf,EAAoB,QAClEgB,EAAgDhB,EAAoB,QAmNhEG,EAA6B,QAvMzC,WACf,IAAIc,EAAYC,OAAOL,EAA6C,SAApDK,CAAuD,IACnEC,EAAOF,EAAU,GACjBG,EAAUH,EAAU,GAEpBI,EAAcH,OAAOL,EAA+C,WAAtDK,CAAyDJ,EAAqE,GAC5IQ,EAAQD,EAAYC,MACpBC,EAAWF,EAAYE,SAEvBC,EAAaF,EAAME,WACnBC,EAAOH,EAAMG,KAEbC,EAAaR,OAAOL,EAA6C,SAApDK,CAAuD,IACpES,EAAKD,EAAW,GAChBE,EAAQF,EAAW,GAEnBG,EAA8B,WAChC,IAAIC,EAAOZ,OAAOR,EAA+H,EAAtIQ,CAAuJX,EAAqGwB,EAAEC,MAAK,SAASC,IACrR,IAAIC,EACJ,OAAO3B,EAAqGwB,EAAEI,MAAK,SAAkBC,GACnI,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACH,GAAyB,UAAnBb,EAAKc,KAAKC,KAAmB,CACjCJ,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASK,OAAO,SAAUlB,EAAS,CACxCmB,KAAM,SACNC,QAAS,CACPC,MAAO,mCAIb,KAAK,EACH,GAAIzB,EAAM,CACRiB,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASK,OAAO,SAAUlB,EAAS,CACxCmB,KAAM,SACNC,QAAS,CACPC,MAAO,kCAIb,KAAK,EAQH,GAPArB,EAAS,CACPmB,KAAM,SACNC,QAAS,CACPE,SAAS,MAIRlB,EAAI,CACPS,EAASE,KAAO,GAChB,MAIF,OADAF,EAASE,KAAO,EACTpB,OAAOF,EAA+D,EAAtEE,CAAyE,cAAc4B,OAAOnB,GAAK,CACxGR,KAAMA,GACLM,EAAKsB,OAEV,KAAK,EAGH,KAFAb,EAAME,EAASY,MAENC,IAAK,CACZb,EAASE,KAAO,GAChB,MAGF,OAAOF,EAASK,OAAO,SAAUlB,EAAS,CACxCmB,KAAM,SACNC,QAAS,CACPC,MAAOV,EAAIe,QAIjB,KAAK,GACH1B,EAASL,OAAOH,EAAgE,EAAvEG,CAA0EM,EAAYG,EAAIO,EAAIgB,SAAU,mBACjHd,EAASE,KAAO,GAChB,MAEF,KAAK,GAEH,OADAF,EAASE,KAAO,GACTpB,OAAOF,EAAgE,EAAvEE,CAA0E,aAAc,CAC7FC,KAAMA,GACLM,EAAKsB,OAEV,KAAK,GAGH,KAFAb,EAAME,EAASY,MAENC,IAAK,CACZb,EAASE,KAAO,GAChB,MAGF,OAAOF,EAASK,OAAO,SAAUlB,EAAS,CACxCmB,KAAM,SACNC,QAAS,CACPC,MAAOV,EAAIe,QAIjB,KAAK,GACH1B,EAAS,CACPmB,KAAM,iBACNC,QAAS,GAAGG,OAAO5B,OAAOT,EAAgI,EAAvIS,CAA0IM,GAAa,CAACU,EAAIiB,gBAGnL,KAAK,GAGH,OAFA/B,EAAQ,IACRQ,EAAM,IACCQ,EAASK,OAAO,SAAUlB,EAAS,CACxCmB,KAAM,SACNC,QAAS,CACPS,QAASlB,EAAImB,QAInB,KAAK,GACL,IAAK,MACH,OAAOjB,EAASkB,UAGrBrB,OAGL,OAAO,WACL,OAAOH,EAAKyB,MAAMC,KAAMC,YApHM,GA6HlC,OAAoBvC,OAAOb,EAAqD,KAA5Da,CAA+D,MAAO,CACxFwC,UAAW,wBACXC,SAAU,CAAczC,OAAOb,EAAoD,IAA3Da,CAA8DN,EAA+CmB,EAAG,CACtI4B,SAAuBzC,OAAOb,EAAoD,IAA3Da,CAA8D,QAAS,CAC5FyC,SAAU,iBAEGzC,OAAOb,EAAqD,KAA5Da,CAA+D,MAAO,CACrFwC,UAAW,mBACXC,SAAU,CAAczC,OAAOb,EAAoD,IAA3Da,CAA8D,QAAS,CAC7FwB,KAAM,OACNgB,UAAW,eACXE,YAAa,qBACbC,MAAO1C,EACP2C,SAAU,SAAkBC,GAC1B,OAAO3C,EAAQ2C,EAAEC,OAAOH,UAEX3C,OAAOb,EAAoD,IAA3Da,CAA8D,SAAU,CACvFwC,UAAW,yBACXO,QAASpC,EACT8B,SAAUhC,EAAK,SAAW,cAE1BH,EAAW0C,KAAI,SAAUC,GAC3B,OAAoBjD,OAAOb,EAAoD,IAA3Da,CAA8D,MAAO,CACvFwC,UAAW,4BACXC,SAAuBzC,OAAOb,EAAqD,KAA5Da,CAA+D,MAAO,CAC3FwC,UAAW,2CACXC,SAAU,CAACQ,EAAShD,KAAmBD,OAAOb,EAAqD,KAA5Da,CAA+D,MAAO,CAC3GkD,MAAO,CACLC,OAAQ,WAEVV,SAAU,CAAczC,OAAOb,EAAoD,IAA3Da,CAA8D,IAAK,CACzFwC,UAAW,6BACXO,QAAS,WACP,OAtCW,SAA4BE,GACnDvC,EAAMuC,EAASG,KACflD,EAAQ+C,EAAShD,MAoCEoD,CAAmBJ,MAEbjD,OAAOb,EAAoD,IAA3Da,CAA8D,IAAK,CAClFwC,UAAW,+BACXc,cAAe,QACfC,cAAe,gBACfR,QAAS,WACP,OAAO1C,EAAS,CACdmB,KAAM,YACNC,QAAS,CAAC,CACR+B,KAAMlD,EACNG,GAAIwC,EAASG,IACbK,MAAOR,EAAShD,KAChBuB,KAAM,+BAOjByB,EAASG,cAShB,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/categories-7863697a0c2accff8143.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[9],{\n\n/***/ \"j49Z\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/categories\",\n      function () {\n        return __webpack_require__(\"mAMT\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"mAMT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"KQm4\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"g4pe\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _store_GlobalState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"qG/y\");\n/* harmony import */ var _store_Actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"WtUO\");\n/* harmony import */ var _utils_fetchData__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"EFaQ\");\n\n\n\n\n\n\n\n\n\n\n\nvar Categories = function Categories() {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(_store_GlobalState__WEBPACK_IMPORTED_MODULE_6__[/* DataContext */ \"a\"]),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var categories = state.categories,\n      auth = state.auth;\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(''),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var createCategory = /*#__PURE__*/function () {\n    var _ref = Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n      var res;\n      return _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(auth.user.role !== 'admin')) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Authentication is not vaild.'\n                }\n              }));\n\n            case 2:\n              if (name) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Name can not be left blank.'\n                }\n              }));\n\n            case 4:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n\n              if (!id) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 8;\n              return Object(_utils_fetchData__WEBPACK_IMPORTED_MODULE_8__[/* putData */ \"e\"])(\"categories/\".concat(id), {\n                name: name\n              }, auth.token);\n\n            case 8:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 11:\n              dispatch(Object(_store_Actions__WEBPACK_IMPORTED_MODULE_7__[/* updateItem */ \"f\"])(categories, id, res.category, 'ADD_CATEGORIES'));\n              _context.next = 20;\n              break;\n\n            case 14:\n              _context.next = 16;\n              return Object(_utils_fetchData__WEBPACK_IMPORTED_MODULE_8__[/* postData */ \"d\"])('categories', {\n                name: name\n              }, auth.token);\n\n            case 16:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 19:\n              dispatch({\n                type: \"ADD_CATEGORIES\",\n                payload: [].concat(Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(categories), [res.newCategory])\n              });\n\n            case 20:\n              setName('');\n              setId('');\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  success: res.msg\n                }\n              }));\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createCategory() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleEditCategory = function handleEditCategory(catogory) {\n    setId(catogory._id);\n    setName(catogory.name);\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n    className: \"col-md-6 mx-auto my-3\",\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_head__WEBPACK_IMPORTED_MODULE_4___default.a, {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"title\", {\n        children: \"Categories\"\n      })\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n      className: \"input-group mb-3\",\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Add a new category\",\n        value: name,\n        onChange: function onChange(e) {\n          return setName(e.target.value);\n        }\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n        className: \"btn btn-secondary ml-1\",\n        onClick: createCategory,\n        children: id ? \"Update\" : \"Create\"\n      })]\n    }), categories.map(function (catogory) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        className: \"card my-2 text-capitalize\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"card-body d-flex justify-content-between\",\n          children: [catogory.name, /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"i\", {\n              className: \"fas fa-edit mr-2 text-info\",\n              onClick: function onClick() {\n                return handleEditCategory(catogory);\n              }\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"i\", {\n              className: \"fas fa-trash-alt text-danger\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModal\",\n              onClick: function onClick() {\n                return dispatch({\n                  type: 'ADD_MODAL',\n                  payload: [{\n                    data: categories,\n                    id: catogory._id,\n                    title: catogory.name,\n                    type: 'ADD_CATEGORIES'\n                  }]\n                });\n              }\n            })]\n          })]\n        })\n      }, catogory._id);\n    })]\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Categories);\n\n/***/ })\n\n},[[\"j49Z\",0,2,1,4]]]);","inputSourceMap":{"version":3,"sources":["/home/user/ilmuone/opaku/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fcategories&absolutePagePath=private-next-pages%2Fcategories.js!","/home/user/ilmuone/opaku/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/home/user/ilmuone/opaku/pages/categories.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAkC;AACzD;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AACmD;AACiB;AACF;AACrF;AACgB;AACM;AACL;AACS;;AAEvD;AACA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,oBAAoB,wDAAU,CAAC,sEAAW;AAC1C;AACA;;AAEA;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA;AACA,eAAe,wIAAiB,eAAe,sGAAmB;AAClE;AACA,aAAa,sGAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,wEAAO;AAC5B;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA,uBAAuB,yEAAU;AACjC;AACA;;AAEA;AACA;AACA,qBAAqB,yEAAQ;AAC7B;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA,mCAAmC,yIAAkB;AACrD,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA,sBAAsB,8DAAK;AAC3B;AACA,4BAA4B,6DAAI,CAAC,gDAAI;AACrC,6BAA6B,6DAAI;AACjC;AACA,OAAO;AACP,KAAK,gBAAgB,8DAAK;AAC1B;AACA,8BAA8B,6DAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,gBAAgB,6DAAI;AAC3B;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,0BAA0B,6DAAI;AAC9B;AACA,+BAA+B,8DAAK;AACpC;AACA,iDAAiD,8DAAK;AACtD;AACA;AACA,aAAa;AACb,oCAAoC,6DAAI;AACxC;AACA;AACA;AACA;AACA,aAAa,gBAAgB,6DAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,yEAAU,E","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/categories\",\n      function () {\n        return require(\"private-next-pages/categories.js\");\n      }\n    ]);\n  ","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Head from 'next/head';\nimport { useContext, useState } from 'react';\nimport { DataContext } from '../store/GlobalState';\nimport { updateItem } from '../store/Actions';\nimport { postData, putData } from \"../utils/fetchData\";\n\nvar Categories = function Categories() {\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useContext = useContext(DataContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var categories = state.categories,\n      auth = state.auth;\n\n  var _useState2 = useState(''),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var createCategory = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(auth.user.role !== 'admin')) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Authentication is not vaild.'\n                }\n              }));\n\n            case 2:\n              if (name) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Name can not be left blank.'\n                }\n              }));\n\n            case 4:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n\n              if (!id) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 8;\n              return putData(\"categories/\".concat(id), {\n                name: name\n              }, auth.token);\n\n            case 8:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 11:\n              dispatch(updateItem(categories, id, res.category, 'ADD_CATEGORIES'));\n              _context.next = 20;\n              break;\n\n            case 14:\n              _context.next = 16;\n              return postData('categories', {\n                name: name\n              }, auth.token);\n\n            case 16:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 19:\n              dispatch({\n                type: \"ADD_CATEGORIES\",\n                payload: [].concat(_toConsumableArray(categories), [res.newCategory])\n              });\n\n            case 20:\n              setName('');\n              setId('');\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  success: res.msg\n                }\n              }));\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createCategory() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleEditCategory = function handleEditCategory(catogory) {\n    setId(catogory._id);\n    setName(catogory.name);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"col-md-6 mx-auto my-3\",\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Categories\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"input-group mb-3\",\n      children: [/*#__PURE__*/_jsx(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Add a new category\",\n        value: name,\n        onChange: function onChange(e) {\n          return setName(e.target.value);\n        }\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: \"btn btn-secondary ml-1\",\n        onClick: createCategory,\n        children: id ? \"Update\" : \"Create\"\n      })]\n    }), categories.map(function (catogory) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"card my-2 text-capitalize\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"card-body d-flex justify-content-between\",\n          children: [catogory.name, /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"fas fa-edit mr-2 text-info\",\n              onClick: function onClick() {\n                return handleEditCategory(catogory);\n              }\n            }), /*#__PURE__*/_jsx(\"i\", {\n              className: \"fas fa-trash-alt text-danger\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModal\",\n              onClick: function onClick() {\n                return dispatch({\n                  type: 'ADD_MODAL',\n                  payload: [{\n                    data: categories,\n                    id: catogory._id,\n                    title: catogory.name,\n                    type: 'ADD_CATEGORIES'\n                  }]\n                });\n              }\n            })]\n          })]\n        })\n      }, catogory._id);\n    })]\n  });\n};\n\nexport default Categories;"]}}