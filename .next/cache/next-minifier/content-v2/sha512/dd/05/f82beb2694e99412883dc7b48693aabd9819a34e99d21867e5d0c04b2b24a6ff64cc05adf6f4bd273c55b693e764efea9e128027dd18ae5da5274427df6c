{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{\"0+Tl\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return s}));var n=r(\"o0o1\"),a=r.n(n),c=r(\"HaE+\");function o(e,t){var r;if(\"undefined\"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if(\"string\"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&\"number\"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var c,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw c}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,i,s,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=o(t),e.prev=2,n.s();case 4:if((c=n.n()).done){e.next=19;break}return i=c.value,(s=new FormData).append(\"file\",i),s.append(\"upload_preset\",\"nextjs_store\"),s.append(\"cloud_name\",\"bafir24\"),e.next=12,fetch(\"https://api.cloudinary.com/v1_1/bafir24/image/upload\",{method:\"POST\",body:s});case 12:return l=e.sent,e.next=15,l.json();case 15:u=e.sent,r.push({public_id:u.public_id,url:u.secure_url});case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:return e.abrupt(\"return\",r);case 28:case\"end\":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},\"20a2\":function(e,t,r){e.exports=r(\"nOHt\")},KNPb:function(e,t,r){\"use strict\";r.r(t);var n=r(\"nKUr\"),a=r(\"o0o1\"),c=r.n(a),o=r(\"HaE+\"),i=r(\"KQm4\"),s=r(\"rePB\"),l=r(\"g4pe\"),u=r.n(l),p=r(\"q1tI\"),d=r(\"qG/y\"),b=r(\"0+Tl\"),j=r(\"EFaQ\"),m=r(\"20a2\");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e={title:\"\",price:0,inStock:0,description:\"\",content:\"\",category:\"\"},t=Object(p.useState)(e),r=t[0],a=t[1],l=r.title,f=r.price,h=r.inStock,y=r.description,x=r.content,g=r.category,v=Object(p.useState)([]),N=v[0],w=v[1],k=Object(p.useContext)(d.a),_=k.state,P=k.dispatch,S=_.categories,T=_.auth,F=Object(m.useRouter)().query.id,I=Object(p.useState)(!1),E=I[0],C=I[1];Object(p.useEffect)((function(){F?(C(!0),Object(j.b)(\"product/\".concat(F)).then((function(e){a(e.product),w(e.product.images)}))):(C(!1),a(e),w([]))}),[F]);var Y=function(e){var t=e.target,n=t.name,c=t.value;a(O(O({},r),{},Object(s.a)({},n,c))),P({type:\"NOTIFY\",payload:{}})},A=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),\"admin\"===T.user.role){e.next=3;break}return e.abrupt(\"return\",P({type:\"NOTIFY\",payload:{error:\"Authentication is not valid.\"}}));case 3:if(l&&f&&h&&y&&x&&\"all\"!==g&&0!==N.length){e.next=5;break}return e.abrupt(\"return\",P({type:\"NOTIFY\",payload:{error:\"Please add all the fields.\"}}));case 5:if(P({type:\"NOTIFY\",payload:{loading:!0}}),n=[],a=N.filter((function(e){return!e.url})),o=N.filter((function(e){return e.url})),!(a.length>0)){e.next=13;break}return e.next=12,Object(b.a)(a);case 12:n=e.sent;case 13:if(!E){e.next=21;break}return e.next=16,Object(j.e)(\"product/\".concat(F),O(O({},r),{},{images:[].concat(Object(i.a)(o),Object(i.a)(n))}),T.token);case 16:if(!(s=e.sent).err){e.next=19;break}return e.abrupt(\"return\",P({type:\"NOTIFY\",payload:{error:s.err}}));case 19:e.next=26;break;case 21:return e.next=23,Object(j.d)(\"product\",O(O({},r),{},{images:[].concat(Object(i.a)(o),Object(i.a)(n))}),T.token);case 23:if(!(s=e.sent).err){e.next=26;break}return e.abrupt(\"return\",P({type:\"NOTIFY\",payload:{error:s.err}}));case 26:return e.abrupt(\"return\",P({type:\"NOTIFY\",payload:{success:s.msg}}));case 27:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(\"div\",{className:\"products_manager\",children:[Object(n.jsx)(u.a,{children:Object(n.jsx)(\"title\",{children:\"Products Manager\"})}),Object(n.jsxs)(\"form\",{className:\"row\",onSubmit:A,children:[Object(n.jsxs)(\"div\",{className:\"col-md-6\",children:[Object(n.jsx)(\"input\",{type:\"text\",name:\"title\",value:l,placeholder:\"Title\",className:\"d-block my-4 w-100 p-2\",onChange:Y}),Object(n.jsxs)(\"div\",{className:\"row\",children:[Object(n.jsxs)(\"div\",{className:\"col-sm-6\",children:[Object(n.jsx)(\"label\",{htmlFor:\"price\",children:\"Price\"}),Object(n.jsx)(\"input\",{type:\"number\",name:\"price\",value:f,placeholder:\"Price\",className:\"d-block w-100 p-2\",onChange:Y})]}),Object(n.jsxs)(\"div\",{className:\"col-sm-6\",children:[Object(n.jsx)(\"label\",{htmlFor:\"price\",children:\"In Stock\"}),Object(n.jsx)(\"input\",{type:\"number\",name:\"inStock\",value:h,placeholder:\"inStock\",className:\"d-block w-100 p-2\",onChange:Y})]})]}),Object(n.jsx)(\"textarea\",{name:\"description\",id:\"description\",cols:\"30\",rows:\"4\",placeholder:\"Description\",onChange:Y,className:\"d-block my-4 w-100 p-2\",value:y}),Object(n.jsx)(\"textarea\",{name:\"content\",id:\"content\",cols:\"30\",rows:\"6\",placeholder:\"Content\",onChange:Y,className:\"d-block my-4 w-100 p-2\",value:x}),Object(n.jsx)(\"div\",{className:\"input-group-prepend px-0 my-2\",children:Object(n.jsxs)(\"select\",{name:\"category\",id:\"category\",value:g,onChange:Y,className:\"custom-select text-capitalize\",children:[Object(n.jsx)(\"option\",{value:\"all\",children:\"All Products\"}),S.map((function(e){return Object(n.jsx)(\"option\",{value:e._id,children:e.name},e._id)}))]})}),Object(n.jsx)(\"button\",{type:\"submit\",className:\"btn btn-info my-2 px-4\",children:E?\"Update\":\"Create\"})]}),Object(n.jsxs)(\"div\",{className:\"col-md-6 my-4\",children:[Object(n.jsxs)(\"div\",{className:\"input-group mb-3\",children:[Object(n.jsx)(\"div\",{className:\"input-group-prepend\",children:Object(n.jsx)(\"span\",{className:\"input-group-text\",children:\"Upload\"})}),Object(n.jsx)(\"div\",{className:\"custom-file border rounded\",children:Object(n.jsx)(\"input\",{type:\"file\",className:\"custom-file-input\",onChange:function(e){P({type:\"NOTIFY\",payload:{}});var t=[],r=0,n=\"\",a=Object(i.a)(e.target.files);return 0===a.length?P({type:\"NOTIFY\",payload:{error:\"Files does not exist.\"}}):(a.forEach((function(e){return e.size>1048576?n=\"The largest image size is 1mb\":\"image/jpeg\"!==e.type&&\"image/png\"!==e.type?n=\"Image format is incorrect.\":((r+=1)<=5&&t.push(e),t)})),n&&P({type:\"NOTIFY\",payload:{error:n}}),N.length+t.length>5?P({type:\"NOTIFY\",payload:{error:\"Select up to 5 images.\"}}):void w([].concat(Object(i.a)(N),t)))},multiple:!0,accept:\"image/*\"})})]}),Object(n.jsx)(\"div\",{className:\"row img-up mx-0\",children:N.map((function(e,t){return Object(n.jsxs)(\"div\",{className:\"file_img my-1\",children:[Object(n.jsx)(\"img\",{src:e.url?e.url:URL.createObjectURL(e),alt:\"\",className:\"img-thumbnail rounded\"}),Object(n.jsx)(\"span\",{onClick:function(){return function(e){var t=Object(i.a)(N);t.splice(e,1),w(t)}(t)},children:\"X\"})]},t)}))})]})]})]})}},ZFar:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/create/[[...id]]\",function(){return r(\"KNPb\")}])}},[[\"ZFar\",0,2,1,3,4]]]);","map":{"version":3,"sources":["static/chunks/pages/create/[[...id]]-b207e719fbfb74643d2b.js"],"names":["_N_E","window","push","0+Tl","module","__webpack_exports__","__webpack_require__","d","imageUpload","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","_ref","a","mark","_callee","images","imgArr","_iterator","_step","item","formData","res","data","wrap","_context","prev","FormData","append","fetch","method","body","sent","json","public_id","url","secure_url","t0","finish","abrupt","stop","_x","apply","this","arguments","20a2","exports","KNPb","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__","_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__","next_head__WEBPACK_IMPORTED_MODULE_5__","next_head__WEBPACK_IMPORTED_MODULE_5___default","react__WEBPACK_IMPORTED_MODULE_6__","_store_GlobalState__WEBPACK_IMPORTED_MODULE_7__","_utils_imageUpload__WEBPACK_IMPORTED_MODULE_8__","_utils_fetchData__WEBPACK_IMPORTED_MODULE_9__","next_router__WEBPACK_IMPORTED_MODULE_10__","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","initialState","title","price","inStock","description","content","category","_useState","product","setProduct","_useState2","setImages","_useContext","state","dispatch","categories","auth","id","query","_useState3","onEdit","setOnEdit","concat","then","handleChangeInput","_e$target","type","payload","handleSubmit","media","imgNewURL","imgOldURL","preventDefault","user","role","error","loading","img","token","success","msg","className","children","onSubmit","placeholder","onChange","htmlFor","cols","rows","map","_id","newImages","num","files","file","size","multiple","accept","index","src","URL","createObjectURL","alt","onClick","newArr","splice","deleteImage","ZFar","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/create/[[...id]]-b207e719fbfb74643d2b.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[10],{\n\n/***/ \"0+Tl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return imageUpload; });\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar imageUpload = /*#__PURE__*/function () {\n  var _ref = Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(images) {\n    var imgArr, _iterator, _step, item, formData, res, data;\n\n    return _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            imgArr = [];\n            _iterator = _createForOfIteratorHelper(images);\n            _context.prev = 2;\n\n            _iterator.s();\n\n          case 4:\n            if ((_step = _iterator.n()).done) {\n              _context.next = 19;\n              break;\n            }\n\n            item = _step.value;\n            formData = new FormData();\n            formData.append(\"file\", item);\n            formData.append(\"upload_preset\", \"nextjs_store\");\n            formData.append(\"cloud_name\", \"bafir24\");\n            _context.next = 12;\n            return fetch(\"https://api.cloudinary.com/v1_1/bafir24/image/upload\", {\n              method: \"POST\",\n              body: formData\n            });\n\n          case 12:\n            res = _context.sent;\n            _context.next = 15;\n            return res.json();\n\n          case 15:\n            data = _context.sent;\n            imgArr.push({\n              public_id: data.public_id,\n              url: data.secure_url\n            });\n\n          case 17:\n            _context.next = 4;\n            break;\n\n          case 19:\n            _context.next = 24;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](2);\n\n            _iterator.e(_context.t0);\n\n          case 24:\n            _context.prev = 24;\n\n            _iterator.f();\n\n            return _context.finish(24);\n\n          case 27:\n            return _context.abrupt(\"return\", imgArr);\n\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 21, 24, 27]]);\n  }));\n\n  return function imageUpload(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/***/ }),\n\n/***/ \"20a2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"nOHt\")\n\n\n/***/ }),\n\n/***/ \"KNPb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"KQm4\");\n/* harmony import */ var _home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"rePB\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"g4pe\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _store_GlobalState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"qG/y\");\n/* harmony import */ var _utils_imageUpload__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"0+Tl\");\n/* harmony import */ var _utils_fetchData__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"EFaQ\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_10__);\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\nvar ProductsManager = function ProductsManager() {\n  var initialState = {\n    title: '',\n    price: 0,\n    inStock: 0,\n    description: '',\n    content: '',\n    category: ''\n  };\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])(initialState),\n      product = _useState[0],\n      setProduct = _useState[1];\n\n  var title = product.title,\n      price = product.price,\n      inStock = product.inStock,\n      description = product.description,\n      content = product.content,\n      category = product.category;\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])([]),\n      images = _useState2[0],\n      setImages = _useState2[1];\n\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useContext\"])(_store_GlobalState__WEBPACK_IMPORTED_MODULE_7__[/* DataContext */ \"a\"]),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var categories = state.categories,\n      auth = state.auth;\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_10__[\"useRouter\"])();\n  var id = router.query.id;\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])(false),\n      onEdit = _useState3[0],\n      setOnEdit = _useState3[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useEffect\"])(function () {\n    if (id) {\n      setOnEdit(true);\n      Object(_utils_fetchData__WEBPACK_IMPORTED_MODULE_9__[/* getData */ \"b\"])(\"product/\".concat(id)).then(function (res) {\n        setProduct(res.product);\n        setImages(res.product.images);\n      });\n    } else {\n      setOnEdit(false);\n      setProduct(initialState);\n      setImages([]);\n    }\n  }, [id]);\n\n  var handleChangeInput = function handleChangeInput(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setProduct(_objectSpread(_objectSpread({}, product), {}, Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])({}, name, value)));\n    dispatch({\n      type: 'NOTIFY',\n      payload: {}\n    });\n  };\n\n  var handleUploadInput = function handleUploadInput(e) {\n    dispatch({\n      type: 'NOTIFY',\n      payload: {}\n    });\n    var newImages = [];\n    var num = 0;\n    var err = '';\n\n    var files = Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(e.target.files);\n\n    if (files.length === 0) return dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: 'Files does not exist.'\n      }\n    });\n    files.forEach(function (file) {\n      if (file.size > 1024 * 1024) return err = 'The largest image size is 1mb';\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return err = 'Image format is incorrect.';\n      num += 1;\n      if (num <= 5) newImages.push(file);\n      return newImages;\n    });\n    if (err) dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: err\n      }\n    });\n    var imgCount = images.length;\n    if (imgCount + newImages.length > 5) return dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: 'Select up to 5 images.'\n      }\n    });\n    setImages([].concat(Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(images), newImages));\n  };\n\n  var deleteImage = function deleteImage(index) {\n    var newArr = Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(images);\n\n    newArr.splice(index, 1);\n    setImages(newArr);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(e) {\n      var media, imgNewURL, imgOldURL, res;\n      return _home_user_ilmuone_opaku_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!(auth.user.role !== 'admin')) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Authentication is not valid.'\n                }\n              }));\n\n            case 3:\n              if (!(!title || !price || !inStock || !description || !content || category === 'all' || images.length === 0)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Please add all the fields.'\n                }\n              }));\n\n            case 5:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n              media = [];\n              imgNewURL = images.filter(function (img) {\n                return !img.url;\n              });\n              imgOldURL = images.filter(function (img) {\n                return img.url;\n              });\n\n              if (!(imgNewURL.length > 0)) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 12;\n              return Object(_utils_imageUpload__WEBPACK_IMPORTED_MODULE_8__[/* imageUpload */ \"a\"])(imgNewURL);\n\n            case 12:\n              media = _context.sent;\n\n            case 13:\n              if (!onEdit) {\n                _context.next = 21;\n                break;\n              }\n\n              _context.next = 16;\n              return Object(_utils_fetchData__WEBPACK_IMPORTED_MODULE_9__[/* putData */ \"e\"])(\"product/\".concat(id), _objectSpread(_objectSpread({}, product), {}, {\n                images: [].concat(Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(imgOldURL), Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(media))\n              }), auth.token);\n\n            case 16:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 19:\n              _context.next = 26;\n              break;\n\n            case 21:\n              _context.next = 23;\n              return Object(_utils_fetchData__WEBPACK_IMPORTED_MODULE_9__[/* postData */ \"d\"])('product', _objectSpread(_objectSpread({}, product), {}, {\n                images: [].concat(Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(imgOldURL), Object(_home_user_ilmuone_opaku_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(media))\n              }), auth.token);\n\n            case 23:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 26;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 26:\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  success: res.msg\n                }\n              }));\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n    className: \"products_manager\",\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_head__WEBPACK_IMPORTED_MODULE_5___default.a, {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"title\", {\n        children: \"Products Manager\"\n      })\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"form\", {\n      className: \"row\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-6\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          value: title,\n          placeholder: \"Title\",\n          className: \"d-block my-4 w-100 p-2\",\n          onChange: handleChangeInput\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: \"col-sm-6\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"label\", {\n              htmlFor: \"price\",\n              children: \"Price\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n              type: \"number\",\n              name: \"price\",\n              value: price,\n              placeholder: \"Price\",\n              className: \"d-block w-100 p-2\",\n              onChange: handleChangeInput\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: \"col-sm-6\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"label\", {\n              htmlFor: \"price\",\n              children: \"In Stock\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n              type: \"number\",\n              name: \"inStock\",\n              value: inStock,\n              placeholder: \"inStock\",\n              className: \"d-block w-100 p-2\",\n              onChange: handleChangeInput\n            })]\n          })]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"textarea\", {\n          name: \"description\",\n          id: \"description\",\n          cols: \"30\",\n          rows: \"4\",\n          placeholder: \"Description\",\n          onChange: handleChangeInput,\n          className: \"d-block my-4 w-100 p-2\",\n          value: description\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"textarea\", {\n          name: \"content\",\n          id: \"content\",\n          cols: \"30\",\n          rows: \"6\",\n          placeholder: \"Content\",\n          onChange: handleChangeInput,\n          className: \"d-block my-4 w-100 p-2\",\n          value: content\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          className: \"input-group-prepend px-0 my-2\",\n          children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"select\", {\n            name: \"category\",\n            id: \"category\",\n            value: category,\n            onChange: handleChangeInput,\n            className: \"custom-select text-capitalize\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"option\", {\n              value: \"all\",\n              children: \"All Products\"\n            }), categories.map(function (item) {\n              return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"option\", {\n                value: item._id,\n                children: item.name\n              }, item._id);\n            })]\n          })\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info my-2 px-4\",\n          children: onEdit ? 'Update' : 'Create'\n        })]\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-6 my-4\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"input-group mb-3\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"input-group-prepend\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"span\", {\n              className: \"input-group-text\",\n              children: \"Upload\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"custom-file border rounded\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n              type: \"file\",\n              className: \"custom-file-input\",\n              onChange: handleUploadInput,\n              multiple: true,\n              accept: \"image/*\"\n            })\n          })]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          className: \"row img-up mx-0\",\n          children: images.map(function (img, index) {\n            return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n              className: \"file_img my-1\",\n              children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"img\", {\n                src: img.url ? img.url : URL.createObjectURL(img),\n                alt: \"\",\n                className: \"img-thumbnail rounded\"\n              }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"span\", {\n                onClick: function onClick() {\n                  return deleteImage(index);\n                },\n                children: \"X\"\n              })]\n            }, index);\n          })\n        })]\n      })]\n    })]\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProductsManager);\n\n/***/ }),\n\n/***/ \"ZFar\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/create/[[...id]]\",\n      function () {\n        return __webpack_require__(\"KNPb\");\n      }\n    ]);\n  \n\n/***/ })\n\n},[[\"ZFar\",0,2,1,3,4]]]);","inputSourceMap":{"version":3,"sources":["/home/user/ilmuone/opaku/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/home/user/ilmuone/opaku/utils/imageUpload.js","/home/user/ilmuone/opaku/node_modules/next/router.js","/home/user/ilmuone/opaku/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/home/user/ilmuone/opaku/pages/create/[[...id]].js","/home/user/ilmuone/opaku/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fcreate%2F%5B%5B...id%5D%5D&absolutePagePath=private-next-pages%2Fcreate%2F%5B%5B...id%5D%5D.js!"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAmG;AACe;;AAElH,wDAAwD,QAAQ,mEAAmE,wHAAwH,gBAAgB,WAAW,yBAAyB,SAAS,wBAAwB,4BAA4B,cAAc,SAAS,8BAA8B,EAAE,qBAAqB,UAAU,EAAE,SAAS,EAAE,8JAA8J,EAAE,kDAAkD,SAAS,kBAAkB,2BAA2B,EAAE,mBAAmB,sBAAsB,8BAA8B,aAAa,EAAE,sBAAsB,eAAe,WAAW,EAAE,mBAAmB,MAAM,+DAA+D,EAAE,UAAU,uBAAuB,EAAE,EAAE,GAAG;;AAEn+B,iDAAiD,gBAAgB,gEAAgE,wDAAwD,6DAA6D,sDAAsD,kHAAkH;;AAE9Z,sCAAsC,uDAAuD,uCAAuC,SAAS,OAAO,kBAAkB,EAAE,aAAa;;AAE9K;AACP,aAAa,wIAAiB,eAAe,sGAAmB;AAChE;;AAEA,WAAW,sGAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6CAA6C,cAA+B;AAC5E,0CAA0C,SAAsB;AAChE;AACA,yBAAyB,sDAAqB;AAC9C;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,G;;;;;;;ACvFD,iBAAiB,mBAAO,CAAC,MAAsB;;;;;;;;;ACA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AACmD;AACe;AACE;AACN;;AAE9G,0CAA0C,gCAAgC,oCAAoC,oDAAoD,8DAA8D,gEAAgE,EAAE,EAAE,gCAAgC,EAAE,aAAa;;AAEnV,gCAAgC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,uDAAuD,CAAC,sIAAe,2BAA2B,EAAE,EAAE,EAAE,6CAA6C,2EAA2E,EAAE,OAAO,iDAAiD,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAEvf;AAC2B;AACF;AACA;AACa;AAC3B;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA,oBAAoB,wDAAU,CAAC,sEAAW;AAC1C;AACA;;AAEA;AACA;AACA,eAAe,8DAAS;AACxB;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA,EAAE,uDAAS;AACX;AACA;AACA,MAAM,wEAAO;AACb;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,6CAA6C,cAAc,EAAE,sIAAe,GAAG;AAC/E;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,gBAAgB,yIAAkB;;AAElC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,wBAAwB,yIAAkB;AAC1C;;AAEA;AACA,iBAAiB,yIAAkB;;AAEnC;AACA;AACA;;AAEA;AACA,eAAe,wIAAiB,eAAe,sGAAmB;AAClE;AACA,aAAa,sGAAmB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,8EAAW;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,wEAAO,sDAAsD,cAAc;AAChG,kCAAkC,yIAAkB,aAAa,yIAAkB;AACnF,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,yEAAQ,0CAA0C,cAAc;AACrF,kCAAkC,yIAAkB,aAAa,yIAAkB;AACnF,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH,sBAAsB,8DAAK;AAC3B;AACA,4BAA4B,6DAAI,CAAC,gDAAI;AACrC,6BAA6B,6DAAI;AACjC;AACA,OAAO;AACP,KAAK,gBAAgB,8DAAK;AAC1B;AACA;AACA,8BAA8B,8DAAK;AACnC;AACA,gCAAgC,6DAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,gBAAgB,8DAAK;AAC9B;AACA,kCAAkC,8DAAK;AACvC;AACA,oCAAoC,6DAAI;AACxC;AACA;AACA,aAAa,gBAAgB,6DAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW,gBAAgB,8DAAK;AAChC;AACA,oCAAoC,6DAAI;AACxC;AACA;AACA,aAAa,gBAAgB,6DAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,gBAAgB,6DAAI;AAC7B;AACA,iCAAiC,8DAAK;AACtC;AACA;AACA;AACA;AACA;AACA,oCAAoC,6DAAI;AACxC;AACA;AACA,aAAa;AACb,kCAAkC,6DAAI;AACtC;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,8DAAK;AAC5B;AACA,gCAAgC,8DAAK;AACrC;AACA,kCAAkC,6DAAI;AACtC;AACA,mCAAmC,6DAAI;AACvC;AACA;AACA,aAAa;AACb,WAAW,gBAAgB,6DAAI;AAC/B;AACA,mCAAmC,6DAAI;AACvC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA,gCAAgC,8DAAK;AACrC;AACA,sCAAsC,6DAAI;AAC1C;AACA;AACA;AACA,eAAe,gBAAgB,6DAAI;AACnC;AACA;AACA,iBAAiB;AACjB;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,8EAAe,E;;;;;;;;ACtY9B;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAwC;AAC/D;AACA","file":"x","sourcesContent":["import _regeneratorRuntime from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport var imageUpload = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(images) {\n    var imgArr, _iterator, _step, item, formData, res, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            imgArr = [];\n            _iterator = _createForOfIteratorHelper(images);\n            _context.prev = 2;\n\n            _iterator.s();\n\n          case 4:\n            if ((_step = _iterator.n()).done) {\n              _context.next = 19;\n              break;\n            }\n\n            item = _step.value;\n            formData = new FormData();\n            formData.append(\"file\", item);\n            formData.append(\"upload_preset\", process.env.CLOUD_UPDATE_PRESET);\n            formData.append(\"cloud_name\", process.env.CLOUD_NAME);\n            _context.next = 12;\n            return fetch(process.env.CLOUD_API, {\n              method: \"POST\",\n              body: formData\n            });\n\n          case 12:\n            res = _context.sent;\n            _context.next = 15;\n            return res.json();\n\n          case 15:\n            data = _context.sent;\n            imgArr.push({\n              public_id: data.public_id,\n              url: data.secure_url\n            });\n\n          case 17:\n            _context.next = 4;\n            break;\n\n          case 19:\n            _context.next = 24;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](2);\n\n            _iterator.e(_context.t0);\n\n          case 24:\n            _context.prev = 24;\n\n            _iterator.f();\n\n            return _context.finish(24);\n\n          case 27:\n            return _context.abrupt(\"return\", imgArr);\n\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 21, 24, 27]]);\n  }));\n\n  return function imageUpload(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","module.exports = require('./dist/client/router')\n","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/user/ilmuone/opaku/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Head from 'next/head';\nimport { useState, useContext, useEffect } from 'react';\nimport { DataContext } from '../../store/GlobalState';\nimport { imageUpload } from '../../utils/imageUpload';\nimport { postData, getData, putData } from '../../utils/fetchData';\nimport { useRouter } from 'next/router';\n\nvar ProductsManager = function ProductsManager() {\n  var initialState = {\n    title: '',\n    price: 0,\n    inStock: 0,\n    description: '',\n    content: '',\n    category: ''\n  };\n\n  var _useState = useState(initialState),\n      product = _useState[0],\n      setProduct = _useState[1];\n\n  var title = product.title,\n      price = product.price,\n      inStock = product.inStock,\n      description = product.description,\n      content = product.content,\n      category = product.category;\n\n  var _useState2 = useState([]),\n      images = _useState2[0],\n      setImages = _useState2[1];\n\n  var _useContext = useContext(DataContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var categories = state.categories,\n      auth = state.auth;\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useState3 = useState(false),\n      onEdit = _useState3[0],\n      setOnEdit = _useState3[1];\n\n  useEffect(function () {\n    if (id) {\n      setOnEdit(true);\n      getData(\"product/\".concat(id)).then(function (res) {\n        setProduct(res.product);\n        setImages(res.product.images);\n      });\n    } else {\n      setOnEdit(false);\n      setProduct(initialState);\n      setImages([]);\n    }\n  }, [id]);\n\n  var handleChangeInput = function handleChangeInput(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setProduct(_objectSpread(_objectSpread({}, product), {}, _defineProperty({}, name, value)));\n    dispatch({\n      type: 'NOTIFY',\n      payload: {}\n    });\n  };\n\n  var handleUploadInput = function handleUploadInput(e) {\n    dispatch({\n      type: 'NOTIFY',\n      payload: {}\n    });\n    var newImages = [];\n    var num = 0;\n    var err = '';\n\n    var files = _toConsumableArray(e.target.files);\n\n    if (files.length === 0) return dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: 'Files does not exist.'\n      }\n    });\n    files.forEach(function (file) {\n      if (file.size > 1024 * 1024) return err = 'The largest image size is 1mb';\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return err = 'Image format is incorrect.';\n      num += 1;\n      if (num <= 5) newImages.push(file);\n      return newImages;\n    });\n    if (err) dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: err\n      }\n    });\n    var imgCount = images.length;\n    if (imgCount + newImages.length > 5) return dispatch({\n      type: 'NOTIFY',\n      payload: {\n        error: 'Select up to 5 images.'\n      }\n    });\n    setImages([].concat(_toConsumableArray(images), newImages));\n  };\n\n  var deleteImage = function deleteImage(index) {\n    var newArr = _toConsumableArray(images);\n\n    newArr.splice(index, 1);\n    setImages(newArr);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var media, imgNewURL, imgOldURL, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!(auth.user.role !== 'admin')) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Authentication is not valid.'\n                }\n              }));\n\n            case 3:\n              if (!(!title || !price || !inStock || !description || !content || category === 'all' || images.length === 0)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Please add all the fields.'\n                }\n              }));\n\n            case 5:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n              media = [];\n              imgNewURL = images.filter(function (img) {\n                return !img.url;\n              });\n              imgOldURL = images.filter(function (img) {\n                return img.url;\n              });\n\n              if (!(imgNewURL.length > 0)) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 12;\n              return imageUpload(imgNewURL);\n\n            case 12:\n              media = _context.sent;\n\n            case 13:\n              if (!onEdit) {\n                _context.next = 21;\n                break;\n              }\n\n              _context.next = 16;\n              return putData(\"product/\".concat(id), _objectSpread(_objectSpread({}, product), {}, {\n                images: [].concat(_toConsumableArray(imgOldURL), _toConsumableArray(media))\n              }), auth.token);\n\n            case 16:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 19:\n              _context.next = 26;\n              break;\n\n            case 21:\n              _context.next = 23;\n              return postData('product', _objectSpread(_objectSpread({}, product), {}, {\n                images: [].concat(_toConsumableArray(imgOldURL), _toConsumableArray(media))\n              }), auth.token);\n\n            case 23:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 26;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 26:\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  success: res.msg\n                }\n              }));\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"products_manager\",\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Products Manager\"\n      })\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: \"row\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-6\",\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          value: title,\n          placeholder: \"Title\",\n          className: \"d-block my-4 w-100 p-2\",\n          onChange: handleChangeInput\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-sm-6\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"price\",\n              children: \"Price\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"number\",\n              name: \"price\",\n              value: price,\n              placeholder: \"Price\",\n              className: \"d-block w-100 p-2\",\n              onChange: handleChangeInput\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-sm-6\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"price\",\n              children: \"In Stock\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"number\",\n              name: \"inStock\",\n              value: inStock,\n              placeholder: \"inStock\",\n              className: \"d-block w-100 p-2\",\n              onChange: handleChangeInput\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          name: \"description\",\n          id: \"description\",\n          cols: \"30\",\n          rows: \"4\",\n          placeholder: \"Description\",\n          onChange: handleChangeInput,\n          className: \"d-block my-4 w-100 p-2\",\n          value: description\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          name: \"content\",\n          id: \"content\",\n          cols: \"30\",\n          rows: \"6\",\n          placeholder: \"Content\",\n          onChange: handleChangeInput,\n          className: \"d-block my-4 w-100 p-2\",\n          value: content\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"input-group-prepend px-0 my-2\",\n          children: /*#__PURE__*/_jsxs(\"select\", {\n            name: \"category\",\n            id: \"category\",\n            value: category,\n            onChange: handleChangeInput,\n            className: \"custom-select text-capitalize\",\n            children: [/*#__PURE__*/_jsx(\"option\", {\n              value: \"all\",\n              children: \"All Products\"\n            }), categories.map(function (item) {\n              return /*#__PURE__*/_jsx(\"option\", {\n                value: item._id,\n                children: item.name\n              }, item._id);\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info my-2 px-4\",\n          children: onEdit ? 'Update' : 'Create'\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-6 my-4\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"input-group mb-3\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"input-group-prepend\",\n            children: /*#__PURE__*/_jsx(\"span\", {\n              className: \"input-group-text\",\n              children: \"Upload\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"custom-file border rounded\",\n            children: /*#__PURE__*/_jsx(\"input\", {\n              type: \"file\",\n              className: \"custom-file-input\",\n              onChange: handleUploadInput,\n              multiple: true,\n              accept: \"image/*\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row img-up mx-0\",\n          children: images.map(function (img, index) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"file_img my-1\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: img.url ? img.url : URL.createObjectURL(img),\n                alt: \"\",\n                className: \"img-thumbnail rounded\"\n              }), /*#__PURE__*/_jsx(\"span\", {\n                onClick: function onClick() {\n                  return deleteImage(index);\n                },\n                children: \"X\"\n              })]\n            }, index);\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport default ProductsManager;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/create/[[...id]]\",\n      function () {\n        return require(\"private-next-pages/create/[[...id]].js\");\n      }\n    ]);\n  "]}}