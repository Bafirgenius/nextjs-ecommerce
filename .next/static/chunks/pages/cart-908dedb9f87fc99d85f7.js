_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"20a2":function(e,t,r){e.exports=r("nOHt")},YFqc:function(e,t,r){e.exports=r("cTJO")},YQMk:function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),a=r("KQm4"),c=r("rePB"),o=r("o0o1"),i=r.n(o),s=r("HaE+"),l=r("g4pe"),u=r.n(l),d=r("q1tI"),f=r("qG/y"),p=r("YFqc"),b=r.n(p),h=r("WtUO"),j=function(e){var t=e.item,r=e.dispatch,a=e.cart;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{width:"100px",overflow:"hidden"},children:Object(n.jsx)("img",{src:t.images[0].url,alt:t.images[0].url,className:"img-thumbnail w-100",style:{minWidth:"80px",height:"80px"}})}),Object(n.jsxs)("td",{style:{minWidth:"200px"},className:"w-50 align-middle",children:[Object(n.jsx)("h5",{className:"text-capitalize text-secondary",children:Object(n.jsx)(b.a,{href:"/product/".concat(t._id),children:Object(n.jsx)("a",{children:t.title})})}),Object(n.jsxs)("h6",{className:"text-danger",children:["$",t.quantity*t.price]}),t.inStock>0?Object(n.jsxs)("p",{className:"mb-1 text-danger",children:["In Stock: ",t.inStock]}):Object(n.jsx)("p",{className:"mb-1 text-danger",children:"Out Stock"})]}),Object(n.jsxs)("td",{className:"align-middle",style:{minWidth:"150px"},children:[Object(n.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){return r(Object(h.c)(a,t._id))},disabled:1===t.quantity,children:" - "}),Object(n.jsx)("span",{className:"px-3",children:t.quantity}),Object(n.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){return r(Object(h.e)(a,t._id))},disabled:t.quantity===t.inStock,children:" + "})]}),Object(n.jsx)("td",{className:"align-middle",style:{minWidth:"50px",cursor:"pointer"},children:Object(n.jsx)("i",{className:"far fa-trash-alt text-danger","aria-hidden":"true",style:{fontSize:"18px"},"data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return r({type:"ADD_MODAL",payload:[{data:a,id:t._id,title:t.title,type:"ADD_CART"}]})}})})]})},m=r("EFaQ"),y=r("20a2");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw c}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(){var e=Object(d.useContext)(f.a),t=e.state,r=e.dispatch,c=t.cart,o=t.auth,l=t.orders,p=Object(d.useState)(0),h=p[0],O=p[1],g=Object(d.useState)(""),w=g[0],k=g[1],_=Object(d.useState)(""),N=_[0],S=_[1],E=Object(d.useState)(!1),C=E[0],I=E[1],M=Object(y.useRouter)();Object(d.useEffect)((function(){!function(){var e=c.reduce((function(e,t){return e+t.price*t.quantity}),0);O(e)}()}),[c]),Object(d.useEffect)((function(){var e=JSON.parse(localStorage.getItem("__next__cart01__devat"));if(e&&e.length>0){var t=[];(function(){var n=Object(s.a)(i.a.mark((function n(){var a,c,o,s,l,u,d,f,p,b,h;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=x(e),n.prev=1,a.s();case 3:if((c=a.n()).done){n.next=12;break}return o=c.value,n.next=7,Object(m.b)("product/".concat(o._id));case 7:s=n.sent,l=s.product,u=l._id,d=l.title,f=l.images,p=l.price,b=l.inStock,h=l.sold,b>0&&t.push({_id:u,title:d,images:f,price:p,inStock:b,sold:h,quantity:o.quantity>b?1:o.quantity});case 10:n.next=3;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),a.e(n.t0);case 17:return n.prev=17,a.f(),n.finish(17);case 20:r({type:"ADD_CART",payload:t});case 21:case"end":return n.stop()}}),n,null,[[1,14,17,20]])})));return function(){return n.apply(this,arguments)}})()()}}),[C]);var D=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w&&N){e.next=2;break}return e.abrupt("return",r({type:"NOTIFY",payload:{error:"Please add your address and mobile."}}));case 2:t=[],n=x(c),e.prev=4,n.s();case 6:if((s=n.n()).done){e.next=14;break}return u=s.value,e.next=10,Object(m.b)("product/".concat(u._id));case 10:e.sent.product.inStock-u.quantity>=0&&t.push(u);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:if(!(t.length<c.length)){e.next=25;break}return I(!C),e.abrupt("return",r({type:"NOTIFY",payload:{error:"The product is out of stock or the quantity is insufficient."}}));case 25:r({type:"NOTIFY",payload:{loading:!0}}),Object(m.d)("order",{address:w,mobile:N,cart:c,total:h},o.token).then((function(e){if(e.err)return r({type:"NOTIFY",payload:{error:e.err}});r({type:"ADD_CART",payload:[]});var t=v(v({},e.newOrder),{},{user:o.user});return r({type:"ADD_ORDERS",payload:[].concat(Object(a.a)(l),[t])}),r({type:"NOTIFY",payload:{success:e.msg}}),M.push("/order/".concat(e.newOrder._id))}));case 27:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}();return 0===c.length?Object(n.jsx)("img",{className:"img-responsive w-100",src:"/Cart.jpg",alt:"not empty"}):Object(n.jsxs)("div",{className:"row mx-auto",children:[Object(n.jsx)(u.a,{children:Object(n.jsx)("title",{children:"Cart Page"})}),Object(n.jsxs)("div",{className:"col-md-8 text-secondary table-responsive my-3",children:[Object(n.jsx)("h2",{className:"text-uppercase",children:"Shopping Cart"}),Object(n.jsx)("table",{className:"table my-3",children:Object(n.jsx)("tbody",{children:c.map((function(e){return Object(n.jsx)(j,{item:e,dispatch:r,cart:c},e._id)}))})})]}),Object(n.jsxs)("div",{className:"col-md-4 my-3 text-right text-uppercase text-secondary",children:[Object(n.jsxs)("form",{children:[Object(n.jsx)("h2",{children:"Shipping"}),Object(n.jsx)("label",{htmlFor:"address",children:"Address"}),Object(n.jsx)("input",{type:"text",name:"address",id:"address",className:"form-control mb-2",value:w,onChange:function(e){return k(e.target.value)}}),Object(n.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(n.jsx)("input",{type:"text",name:"mobile",id:"mobile",className:"form-control mb-2",value:N,onChange:function(e){return S(e.target.value)}})]}),Object(n.jsxs)("h3",{children:["Total: ",Object(n.jsxs)("span",{className:"text-danger",children:["$",h]})]}),Object(n.jsx)(b.a,{href:o.user?"#!":"/signin",children:Object(n.jsx)("a",{className:"btn btn-dark my-2",onClick:D,children:"Proceed with payment"})})]})]})}},ahkM:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r("YQMk")}])},cTJO:function(e,t,r){"use strict";var n=r("J4zp"),a=r("284h");t.__esModule=!0,t.default=void 0;var c=a(r("q1tI")),o=r("elyg"),i=r("nOHt"),s=r("vNVm"),l={};function u(e,t,r,n){if(e&&(0,o.isLocalURL)(t)){e.prefetch(t,r,n).catch((function(e){0}));var a=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;l[t+"%"+r+(a?"%"+a:"")]=!0}}var d=function(e){var t=!1!==e.prefetch,r=(0,i.useRouter)(),a=r&&r.pathname||"/",d=c.default.useMemo((function(){var t=(0,o.resolveHref)(a,e.href,!0),r=n(t,2),c=r[0],i=r[1];return{href:c,as:e.as?(0,o.resolveHref)(a,e.as):i||c}}),[a,e.href,e.as]),f=d.href,p=d.as,b=e.children,h=e.replace,j=e.shallow,m=e.scroll,y=e.locale;"string"===typeof b&&(b=c.default.createElement("a",null,b));var O=c.Children.only(b),v=O&&"object"===typeof O&&O.ref,x=(0,s.useIntersection)({rootMargin:"200px"}),g=n(x,2),w=g[0],k=g[1],_=c.default.useCallback((function(e){w(e),v&&("function"===typeof v?v(e):"object"===typeof v&&(v.current=e))}),[v,w]);(0,c.useEffect)((function(){var e=k&&t&&(0,o.isLocalURL)(f),n="undefined"!==typeof y?y:r&&r.locale,a=l[f+"%"+p+(n?"%"+n:"")];e&&!a&&u(r,f,p,{locale:n})}),[p,f,k,y,t,r]);var N={ref:_,onClick:function(e){O.props&&"function"===typeof O.props.onClick&&O.props.onClick(e),e.defaultPrevented||function(e,t,r,n,a,c,i,s){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,o.isLocalURL)(r))&&(e.preventDefault(),null==i&&(i=n.indexOf("#")<0),t[a?"replace":"push"](r,n,{shallow:c,locale:s,scroll:i}))}(e,r,f,p,h,j,m,y)},onMouseEnter:function(e){(0,o.isLocalURL)(f)&&(O.props&&"function"===typeof O.props.onMouseEnter&&O.props.onMouseEnter(e),u(r,f,p,{priority:!0}))}};if(e.passHref||"a"===O.type&&!("href"in O.props)){var S="undefined"!==typeof y?y:r&&r.locale,E=r&&r.isLocaleDomain&&(0,o.getDomainLocale)(p,S,r&&r.locales,r&&r.domainLocales);N.href=E||(0,o.addBasePath)((0,o.addLocale)(p,S,r&&r.defaultLocale))}return c.default.cloneElement(O,N)};t.default=d},vNVm:function(e,t,r){"use strict";var n=r("J4zp");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,r=e.disabled||!o,s=(0,a.useRef)(),l=(0,a.useState)(!1),u=n(l,2),d=u[0],f=u[1],p=(0,a.useCallback)((function(e){s.current&&(s.current(),s.current=void 0),r||d||e&&e.tagName&&(s.current=function(e,t,r){var n=function(e){var t=e.rootMargin||"",r=i.get(t);if(r)return r;var n=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=n.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)}))}),e);return i.set(t,r={id:t,observer:a,elements:n}),r}(r),a=n.id,c=n.observer,o=n.elements;return o.set(e,t),c.observe(e),function(){o.delete(e),c.unobserve(e),0===o.size&&(c.disconnect(),i.delete(a))}}(e,(function(e){return e&&f(e)}),{rootMargin:t}))}),[r,t,d]);return(0,a.useEffect)((function(){if(!o&&!d){var e=(0,c.requestIdleCallback)((function(){return f(!0)}));return function(){return(0,c.cancelIdleCallback)(e)}}}),[d]),[p,d]};var a=r("q1tI"),c=r("0G5g"),o="undefined"!==typeof IntersectionObserver;var i=new Map}},[["ahkM",0,2,1,3,4]]]);