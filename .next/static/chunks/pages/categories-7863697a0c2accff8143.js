_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{j49Z:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return a("mAMT")}])},mAMT:function(e,t,a){"use strict";a.r(t);var r=a("nKUr"),n=a("o0o1"),c=a.n(n),s=a("KQm4"),o=a("HaE+"),i=a("g4pe"),u=a.n(i),d=a("q1tI"),l=a("qG/y"),p=a("WtUO"),b=a("EFaQ");t.default=function(){var e=Object(d.useState)(""),t=e[0],a=e[1],n=Object(d.useContext)(l.a),i=n.state,j=n.dispatch,m=i.categories,f=i.auth,O=Object(d.useState)(""),y=O[0],x=O[1],N=function(){var e=Object(o.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"===f.user.role){e.next=2;break}return e.abrupt("return",j({type:"NOTIFY",payload:{error:"Authentication is not vaild."}}));case 2:if(t){e.next=4;break}return e.abrupt("return",j({type:"NOTIFY",payload:{error:"Name can not be left blank."}}));case 4:if(j({type:"NOTIFY",payload:{loading:!0}}),!y){e.next=14;break}return e.next=8,Object(b.e)("categories/".concat(y),{name:t},f.token);case 8:if(!(r=e.sent).err){e.next=11;break}return e.abrupt("return",j({type:"NOTIFY",payload:{error:r.err}}));case 11:j(Object(p.f)(m,y,r.category,"ADD_CATEGORIES")),e.next=20;break;case 14:return e.next=16,Object(b.d)("categories",{name:t},f.token);case 16:if(!(r=e.sent).err){e.next=19;break}return e.abrupt("return",j({type:"NOTIFY",payload:{error:r.err}}));case 19:j({type:"ADD_CATEGORIES",payload:[].concat(Object(s.a)(m),[r.newCategory])});case 20:return a(""),x(""),e.abrupt("return",j({type:"NOTIFY",payload:{success:r.msg}}));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"col-md-6 mx-auto my-3",children:[Object(r.jsx)(u.a,{children:Object(r.jsx)("title",{children:"Categories"})}),Object(r.jsxs)("div",{className:"input-group mb-3",children:[Object(r.jsx)("input",{type:"text",className:"form-control",placeholder:"Add a new category",value:t,onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("button",{className:"btn btn-secondary ml-1",onClick:N,children:y?"Update":"Create"})]}),m.map((function(e){return Object(r.jsx)("div",{className:"card my-2 text-capitalize",children:Object(r.jsxs)("div",{className:"card-body d-flex justify-content-between",children:[e.name,Object(r.jsxs)("div",{style:{cursor:"pointer"},children:[Object(r.jsx)("i",{className:"fas fa-edit mr-2 text-info",onClick:function(){return function(e){x(e._id),a(e.name)}(e)}}),Object(r.jsx)("i",{className:"fas fa-trash-alt text-danger","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return j({type:"ADD_MODAL",payload:[{data:m,id:e._id,title:e.name,type:"ADD_CATEGORIES"}]})}})]})]})},e._id)}))]})}}},[["j49Z",0,2,1,4]]]);