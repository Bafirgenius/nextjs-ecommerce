_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"20a2":function(e,t,n){e.exports=n("nOHt")},RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return b}));var c=n("nKUr"),a=n("KQm4"),r=n("g4pe"),s=n.n(r),o=n("q1tI"),i=n("qG/y"),l=n("YFqc"),u=n.n(l),d=n("WtUO"),f=function(e){var t=e.product,n=e.handleCheck,a=Object(o.useContext)(i.a),r=a.state,s=a.dispatch,l=r.cart,f=r.auth;return Object(c.jsxs)("div",{className:"card",style:{width:"18rem"},children:[f.user&&"admin"===f.user.role&&Object(c.jsx)("input",{type:"checkbox",checked:t.checked,className:"position-absolute",style:{height:"20px",width:"20px"},onChange:function(){return n(t._id)}}),Object(c.jsx)("img",{className:"card-img-top",src:t.images[0].url,alt:t.images[0].url}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title text-capitalize",title:t.title,children:t.title}),Object(c.jsxs)("div",{className:"row justify-content-between mx-0",children:[Object(c.jsxs)("h6",{className:"text-danger",children:["$",t.price]}),t.inStock>0?Object(c.jsxs)("h6",{className:"text-danger",children:["In Stock: ",t.inStock]}):Object(c.jsx)("h6",{className:"text-danger",children:"Out Stock"})]}),Object(c.jsx)("p",{className:"card-text",title:t.description,children:t.description}),Object(c.jsx)("div",{className:"row justify-content-between mx-0",children:f.user&&"admin"===f.user.role?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.a,{href:"create/".concat(t._id),children:Object(c.jsx)("a",{className:"btn btn-info",style:{marginRight:"5px",flex:1},children:"Edit"})}),Object(c.jsx)("button",{className:"btn btn-danger",style:{marginLeft:"5px",flex:1},"data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return s({type:"ADD_MODAL",payload:[{data:"",id:t._id,title:t.title,type:"DELETE_PRODUCT"}]})},children:"Delete"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.a,{href:"product/".concat(t._id),children:Object(c.jsx)("a",{className:"btn btn-info",style:{marginRight:"5px",flex:1},children:"View"})}),Object(c.jsx)("button",{className:"btn btn-success",style:{marginLeft:"5px",flex:1},disabled:0===t.inStock,onClick:function(){return s(Object(d.b)(t,l))},children:"Buy"})]})})]})]})},p=function(e){var t=e.router,n=e.page,c=e.category,a=e.sort,r=e.search,s=t.pathname,o=t.query;c&&(o.category=c),n&&(o.page=n),r&&(o.search=r),a&&(o.sort=a),t.push({pathname:s,query:o})},h=n("20a2"),j=(n("EFaQ"),function(e){var t=e.state,n=Object(o.useState)(""),a=n[0],r=n[1],s=Object(o.useState)(""),i=s[0],l=s[1],u=Object(o.useState)(""),d=u[0],f=u[1],j=t.categories,b=Object(h.useRouter)();return Object(o.useEffect)((function(){p({router:b,search:a?a.toLowerCase():"all"})}),[a]),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("div",{className:"input-group-prepend col-md-2 px-0 mt-2",children:Object(c.jsxs)("select",{className:"custom-select text-capitalize",value:d,onChange:function(e){f(e.target.value),p({router:b,category:e.target.value})},children:[Object(c.jsx)("option",{value:"all",children:"All Products"}),j.map((function(e){return Object(c.jsx)("option",{value:e._id,children:e.name},e._id)}))]})}),Object(c.jsx)("form",{autoComplete:"off",className:"mt-2 col-md-8 px-0",children:Object(c.jsx)("input",{type:"text",className:"form-control",list:"title_product",value:a.toLowerCase(),onChange:function(e){return r(e.target.value)}})}),Object(c.jsx)("div",{className:"input-group-prepend col-md-2 px-0 mt-2",children:Object(c.jsxs)("select",{className:"custom-select text-capitalize",value:i,onChange:function(e){l(e.target.value),p({router:b,sort:e.target.value})},children:[Object(c.jsx)("option",{value:"-createdAt",children:"Newest"}),Object(c.jsx)("option",{value:"oldest",children:"Oldest"}),Object(c.jsx)("option",{value:"-sold",children:"Best sales"}),Object(c.jsx)("option",{value:"-price",children:"Price: Hight-Low"}),Object(c.jsx)("option",{value:"price",children:"Price: Low-Hight"})]})})]})}),b=!0;t.default=function(e){var t=Object(o.useState)(e.products),n=t[0],r=t[1],l=Object(o.useState)(!1),u=l[0],d=l[1],b=Object(o.useState)(1),m=b[0],x=b[1],O=Object(h.useRouter)(),v=Object(o.useContext)(i.a),g=v.state,y=v.dispatch,N=g.auth;Object(o.useEffect)((function(){r(e.products)}),[e.products]),Object(o.useEffect)((function(){0===Object.keys(O.query).length&&x(1)}),[O.query]);var _=function(e){n.forEach((function(t){t._id===e&&(t.checked=!t.checked)})),r(Object(a.a)(n))};return Object(c.jsxs)("div",{className:"home_page",children:[Object(c.jsx)(s.a,{children:Object(c.jsx)("title",{children:"Home Page"})}),Object(c.jsx)(j,{state:g}),N.user&&"admin"===N.user.role&&Object(c.jsxs)("div",{className:"delete_all btn btn-danger mt-2",style:{marginBottom:"-10px"},children:[Object(c.jsx)("input",{type:"checkbox",checked:u,onChange:function(){n.forEach((function(e){return e.checked=!u})),r(Object(a.a)(n)),d(!u)},style:{width:"25px",height:"25px",transform:"translateY(8px)"}}),Object(c.jsx)("button",{className:"btn btn-danger ml-2","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){var e=[];n.forEach((function(t){t.checked&&e.push({data:"",id:t._id,title:"Delete all selected products?",type:"DELETE_PRODUCT"})})),y({type:"ADD_MODAL",payload:e})},children:"DELETE ALL"})]}),Object(c.jsx)("div",{className:"products",children:0===n.length?Object(c.jsx)("h2",{children:"No Products"}):n.map((function(e){return Object(c.jsx)(f,{product:e,handleCheck:_},e._id)}))}),e.result<6*m?"":Object(c.jsx)("button",{className:"btn btn-outline-info d-block mx-auto mb-4",onClick:function(){x(m+1),p({router:O,page:m+1})},children:"Load more"})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var c=n("J4zp"),a=n("284h");t.__esModule=!0,t.default=void 0;var r=a(n("q1tI")),s=n("elyg"),o=n("nOHt"),i=n("vNVm"),l={};function u(e,t,n,c){if(e&&(0,s.isLocalURL)(t)){e.prefetch(t,n,c).catch((function(e){0}));var a=c&&"undefined"!==typeof c.locale?c.locale:e&&e.locale;l[t+"%"+n+(a?"%"+a:"")]=!0}}var d=function(e){var t=!1!==e.prefetch,n=(0,o.useRouter)(),a=n&&n.pathname||"/",d=r.default.useMemo((function(){var t=(0,s.resolveHref)(a,e.href,!0),n=c(t,2),r=n[0],o=n[1];return{href:r,as:e.as?(0,s.resolveHref)(a,e.as):o||r}}),[a,e.href,e.as]),f=d.href,p=d.as,h=e.children,j=e.replace,b=e.shallow,m=e.scroll,x=e.locale;"string"===typeof h&&(h=r.default.createElement("a",null,h));var O=r.Children.only(h),v=O&&"object"===typeof O&&O.ref,g=(0,i.useIntersection)({rootMargin:"200px"}),y=c(g,2),N=y[0],_=y[1],E=r.default.useCallback((function(e){N(e),v&&("function"===typeof v?v(e):"object"===typeof v&&(v.current=e))}),[v,N]);(0,r.useEffect)((function(){var e=_&&t&&(0,s.isLocalURL)(f),c="undefined"!==typeof x?x:n&&n.locale,a=l[f+"%"+p+(c?"%"+c:"")];e&&!a&&u(n,f,p,{locale:c})}),[p,f,_,x,t,n]);var k={ref:E,onClick:function(e){O.props&&"function"===typeof O.props.onClick&&O.props.onClick(e),e.defaultPrevented||function(e,t,n,c,a,r,o,i){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(n))&&(e.preventDefault(),null==o&&(o=c.indexOf("#")<0),t[a?"replace":"push"](n,c,{shallow:r,locale:i,scroll:o}))}(e,n,f,p,j,b,m,x)},onMouseEnter:function(e){(0,s.isLocalURL)(f)&&(O.props&&"function"===typeof O.props.onMouseEnter&&O.props.onMouseEnter(e),u(n,f,p,{priority:!0}))}};if(e.passHref||"a"===O.type&&!("href"in O.props)){var w="undefined"!==typeof x?x:n&&n.locale,L=n&&n.isLocaleDomain&&(0,s.getDomainLocale)(p,w,n&&n.locales,n&&n.domainLocales);k.href=L||(0,s.addBasePath)((0,s.addLocale)(p,w,n&&n.defaultLocale))}return r.default.cloneElement(O,k)};t.default=d},vNVm:function(e,t,n){"use strict";var c=n("J4zp");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,i=(0,a.useRef)(),l=(0,a.useState)(!1),u=c(l,2),d=u[0],f=u[1],p=(0,a.useCallback)((function(e){i.current&&(i.current(),i.current=void 0),n||d||e&&e.tagName&&(i.current=function(e,t,n){var c=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var c=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=c.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:a,elements:c}),n}(n),a=c.id,r=c.observer,s=c.elements;return s.set(e,t),r.observe(e),function(){s.delete(e),r.unobserve(e),0===s.size&&(r.disconnect(),o.delete(a))}}(e,(function(e){return e&&f(e)}),{rootMargin:t}))}),[n,t,d]);return(0,a.useEffect)((function(){if(!s&&!d){var e=(0,r.requestIdleCallback)((function(){return f(!0)}));return function(){return(0,r.cancelIdleCallback)(e)}}}),[d]),[p,d]};var a=n("q1tI"),r=n("0G5g"),s="undefined"!==typeof IntersectionObserver;var o=new Map},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",0,2,1,3,4]]]);